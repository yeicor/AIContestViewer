[gd_scene load_steps=11 format=3 uid="uid://cjklklxubiss0"]

[ext_resource type="Script" path="res://island/terrain/terrain.gd" id="1_blkia"]
[ext_resource type="Shader" path="res://island/terrain/terrain.gdshader" id="1_pas75"]
[ext_resource type="Shader" path="res://island/terrain/heightmapgen.gdshader" id="3_hlvgl"]
[ext_resource type="Script" path="res://island/terrain/heightmapgen.gd" id="3_lm46a"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ngnwd"]
render_priority = 0
shader = ExtResource("1_pas75")
shader_parameter/grass = Color(0, 0.141176, 0, 1)
shader_parameter/sand = Color(0.180392, 0.156863, 0, 1)

[sub_resource type="Image" id="Image_jvuss"]
data = {
"data": PackedByteArray(93, 116, 93, 93, 69, 46, 46, 46, 69, 69, 69, 93, 93, 93, 93, 116, 116, 93, 69, 46, 23, 116, 162, 116, 116, 93, 69, 69, 69, 93, 93, 93, 116, 116, 116, 116, 162, 162, 116, 93, 69, 46, 93, 116, 162, 162, 116, 93, 93, 93, 116, 116, 116, 162, 162, 162, 162, 186, 186, 162, 116, 93, 69, 69, 93, 116, 116, 162, 116, 116, 116, 162, 162, 162, 186, 186, 186, 186, 209, 186, 162, 116, 93, 69, 93, 116, 162, 162, 186, 162, 162, 162, 186, 186, 186, 209, 209, 209, 209, 209, 186, 162, 116, 93, 69, 93, 116, 162, 186, 186, 186, 186, 186, 209, 209, 209, 232, 232, 232, 232, 232, 209, 186, 162, 116, 93, 116, 162, 162, 162, 162, 186, 209, 209, 232, 232, 232, 255, 255, 255, 255, 232, 209, 186, 162, 116, 93, 93, 116, 116, 116, 116, 162, 186, 209, 232, 232, 232, 255, 255, 232, 232, 232, 209, 186, 162, 116, 93, 69, 93, 116, 116, 162, 186, 209, 232, 232, 209, 209, 232, 232, 209, 209, 209, 186, 162, 116, 93, 69, 93, 116, 162, 162, 186, 209, 232, 232, 209, 186, 186, 209, 209, 186, 186, 186, 186, 162, 116, 93, 69, 93, 116, 162, 186, 186, 209, 209, 209, 186, 162, 162, 186, 186, 162, 162, 162, 162, 116, 93, 69, 46, 93, 116, 162, 186, 162, 186, 186, 186, 162, 116, 116, 162, 162, 116, 116, 116, 162, 116, 93, 69, 46, 93, 116, 162, 162, 116, 162, 162, 186, 186, 162, 162, 162, 162, 162, 162, 162, 162, 116, 93, 69, 46, 93, 116, 162, 162, 116, 116, 116, 162, 162, 162, 116, 116, 116, 116, 116, 116, 116, 93, 69, 46, 23, 93, 116, 162, 162, 162, 116, 93, 116, 116, 162, 162, 162, 116, 116, 116, 116, 93, 69, 46, 23, 0, 69, 93, 116, 116, 116, 116, 116, 116, 116, 162, 186, 186, 162, 162, 162, 162, 116, 93, 69, 46, 23, 46, 69, 93, 93, 116, 162, 162, 162, 162, 162, 162, 162, 116, 116, 116, 162, 162, 116, 93, 69, 46, 23, 46, 69, 69, 93, 116, 116, 116, 116, 116, 116, 116, 93, 93, 93, 116, 116, 93, 69, 46, 23),
"format": "Lum8",
"height": 18,
"mipmaps": false,
"width": 21
}

[sub_resource type="ImageTexture" id="ImageTexture_f22ob"]
image = SubResource("Image_jvuss")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_7txjp"]
seed = 42
frequency = 0.005
domain_warp_enabled = true
domain_warp_amplitude = 50.0
domain_warp_frequency = 0.01
domain_warp_fractal_octaves = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_i6u8t"]
width = 368
height = 271
generate_mipmaps = false
noise = SubResource("FastNoiseLite_7txjp")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8usiv"]
shader = ExtResource("3_hlvgl")
shader_parameter/water_level_at = 0.545455
shader_parameter/noise = SubResource("NoiseTexture2D_i6u8t")
shader_parameter/distance_to_water_level = SubResource("ImageTexture_f22ob")

[node name="Terrain" type="MeshInstance3D"]
material_override = SubResource("ShaderMaterial_ngnwd")
script = ExtResource("1_blkia")

[node name="HeightMapGen" type="SubViewport" parent="."]
disable_3d = true
handle_input_locally = false
size = Vector2i(368, 271)
render_target_update_mode = 0
script = ExtResource("3_lm46a")

[node name="Heightmap" type="ColorRect" parent="HeightMapGen"]
material = SubResource("ShaderMaterial_8usiv")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
